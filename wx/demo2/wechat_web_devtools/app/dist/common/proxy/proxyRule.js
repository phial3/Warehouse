"use strict";function init(){function e(e){var t=e.headers.host,n=e.connection.encrypted&&!/^http:/.test(e.url)?"https":"http",o="http"===n?e.url:n+"://"+t+e.url,p=r.parse(o);return p.pureHref=p.href.replace(/\?.*/,"").replace(/\#.*/,""),p}var r=(require("fs"),require("url")),t=require("path"),n=(require("zlib"),require("../../utils/report.js"),require("../../weapp/weApp.js")),o=require("../../config/config.js"),p="https://clients1.google.com/tbproxy/af/",i=o.weappURLRegular,s=o.weappASURLRegular;_exports={shouldUseLocalResponse:function(r,t){var n=e(r),o=n.pureHref;return!!i.test(o)||(0===o.indexOf(p)||!!s.test(o))},dealLocalResponse:function(r,o,u){var a=e(r),c=a.pureHref;i.test(c)?!function(){var e=a.href;n.getResponse(e,function(r,n,o){if(r)return void u(r,n,o||"");t.extname(e).replace(".","");u(200,n,o)})}():0===c.indexOf(p)?(console.error(p),u(400,{},"")):s.test(c)&&n.getAppservice(c,function(e,r,t){return e?void u(e,{},t):void u(200,r,t)})}}}var _exports;init(),module.exports=_exports;