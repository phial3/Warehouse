"use strict";function init(){function r(r,o,u){function s(r,i,e,n){if(i+e.length<=r.length&&r.substr(i,e.length)==e){var f=r.indexOf(n,i);if(f<0&&"*/"==n)throw q+t;return f<0?r.length-i:(f+=n.length,f-i-1)}return 0}function a(r,i,e){var n=i;if(r[i]==e){for(var t=i+1;t<r.length;t++)if("\\"==r[t])t++;else if(r[t]==e)return t-n;throw q+f+e}return 0}function l(r,i){g[++O]=r.id,b[O]=x[i.id],x[i.id]=O,k[r.id]++}function d(r){for(var i=0,n=0;n>=0;)n=r.indexOf(e.sep,i+1),n>=0&&(i=n);return 0==i?e.sep:r.substring(0,i)}function h(r,i){var e,n={dis:0,file:""};if("@import"==r.substr(i,7)){for(var t=i+8;t<r.length;){if(e=s(r,t,"//","\n"))t+=e;else if(e=s(r,t,"/*","*/"))t+=e;else if("'"==r[t]||'"'==r[t])break;t++}if("'"==r[t]||'"'==r[t]){for(e=a(r,t,r[t]);m.indexOf(r[t+1])>=0;)t++;n.file=r.substr(t+1,e-1),n.dis=t+e-i}}return n}function c(r,t){var f;if("undefined"!=typeof w[r])return y[w[r]];w[r]=_++,f={id:w[r],path:r},y.push(f),k[f.id]=0;var o;try{o=i.readFileSync(r,"utf8"),q=r;var u,p=d(r);F[f.id]=!0,C.push(f);for(var v=0;v<o.length;v++)if(u=s(o,v,"//","\n"))v+=u;else if(u=s(o,v,"/*","*/"))v+=u;else if(u=a(o,v,"'"))v+=u;else if(u=a(o,v,'"'))v+=u;else{var g;if(g=h(o,v),g.dis){v+=g.dis;var x;if(x="\\"==g.file[0]||"/"==g.file[0]?c(e.join(t,g.file),t):c(e.join(p,g.file),t),l(f,x),F[x.id])for(var b=x.path;;){var O=C.pop();if(b=O.path+" -> "+b,O.id==x.id)throw n+":\n"+b}}}}catch(j){throw j}return C.pop(),F[f.id]=!1,f}function p(r){var i="."+y[r].path.substring(o.length);j.push(i),k[r]=-1,v--;for(var e=x[r];e;e=b[e]){var n=g[e];k[n]--,0==k[n]&&p(n)}}var v,g=[],x=[],b=[],w=[],y=[],k=[],O=0,_=0,j=[],m="\t\n\r ",q="",C=[],F=[];try{c(r,o),v=_;for(var S=0;S<_;S++)0==k[S]&&p(S);u(null,j)}catch(z){u(z,null)}}var i=require("fs"),e=require("path"),n="Circular dependencies",t=": lack of */",f=": lack of ";_exports=function(i,e,n){r(i,e,function(r,i){n(r,i)})}}var _exports;init(),module.exports=_exports;