"use strict";function init(){var e,t=require("path"),r=require("../lib/react.js"),o=require("./popup/popup.js"),s=require("./menubar/menubar.js"),i=require("./toolbar/toolbar.js"),p=require("./sidebar/sidebar.js"),n=require("./develop/develop.js"),a=require("./detail/detail.js"),c=(require("./setting/setting.js"),require("./edit/edit.js")),u=require("../weapp/utils/projectManager.js").manager,h=require("../actions/projectActions.js"),j=require("./dialog/dialog.js"),l=require("./about/about.js"),w=require("../stores/windowStores.js"),m=require("../actions/windowActions.js"),d=require("../stores/webviewStores.js"),E=require("../actions/webviewActions.js"),g=r.createClass({displayName:"Main",getInitialState:function(){var e=this.props.project?w.getLastShow():"debug";return{show:e}},optProject:function(e){w.setLastShow(e),this.setState({show:e})},_projectWatcher:function(r,o,s,i){var p=this;if(this.props.project){var n=r.watcher||"edit"===this.state.show;n&&(clearTimeout(e),e=setTimeout(function(){var e=t.extname(s);if(".json"===e||".js"===e)h.restart(p.props.project);else{var r=d.getCurrentWebviewID();E.setWebviewAction(r,{act:"reLoad"})}},100))}},_openProjectFile:function(){this.optProject("edit")},componentDidMount:function(e){u.on("FILE_CHANGE",this._projectWatcher),w.on("OPEN_PROJECT_FILE",this._openProjectFile)},componentWillMount:function(){u.removeListener("FILE_CHANGE",this._projectWatcher),w.removeListener("OPEN_PROJECT_FILE",this._openProjectFile)},showSetting:function(){m.showSetting()},render:function(){var e="",t="";return this.props.project&&(e=r.createElement(c,{show:this.state.show,project:this.props.project}),t=r.createElement(a,{project:this.props.project,show:this.state.show})),r.createElement("div",{className:"main"},r.createElement(s,{appQuit:this.props.appQuit,appMin:this.props.appMin,appMax:this.props.appMax,showSetting:this.showSetting,project:this.props.project}),r.createElement(i,{project:this.props.project}),r.createElement("div",{className:"body"},r.createElement(p,{show:this.state.show,project:this.props.project,optProject:this.optProject}),r.createElement(n,{show:this.state.show,optDebugger:this.optDebugger,project:this.props.project}),e,t),r.createElement(j,null),r.createElement(o,null),r.createElement(l,null))}});_exports=g}var _exports;init(),module.exports=_exports;