"use strict";function init(){var e=require("../../lib/react.js"),t=require("../../lib/react-dom.js"),o=require("./webviewheader.js"),s=require("./webviewbody.js"),i=require("./webviewfooter.js"),r=require("./webviewloading.js"),a=require("./webviewshare.js"),h=require("./webviewcard.js"),w=require("./webviewAuthorizeDialog.js"),c=require("../../stores/webviewStores.js"),n=require("../../actions/windowActions.js"),l=require("../../cssStr/cssStr.js"),d="#ffffff",u=e.createClass({displayName:"Webview",getInitialState:function(){return{showFooter:!1,showShare:!1,showAuthorizeDialog:!1,shareOpt:{},webviewID:parseInt(this.props.webviewID),showCard:!1,cardInfo:{}}},goBack:function(e){var o=this.state.webviewID,s=t.findDOMNode(this.refs.container).querySelector(".webviewbody"+o);this.props.goBack(o,s,e)},showFooter:function v(e){var v=void 0===e?!this.state.showFooter:e;this.setState({showFooter:v})},showAuthorizeDialog:function(e){this.setState({showAuthorizeDialog:void 0===e?!this.state.showAuthorizeDialog:e})},showShare:function(e){this.setState({showShare:e})},_showShareWebview:function(e,t,o){this.setState({showShare:!0,showFooter:!1,shareOpt:{title:o.title,desc:o.desc||o.title,imgUrl:o.img_url,sdkName:t.sdkName}})},_cardSdk:function(e,t,o,s,i){this.setState({showCard:!0,cardInfo:{sdkName:t,data:i,webviewID:e,isHavePurview:s,cardData:o}}),n.disAbleURLBar()},closeCard:function(){this.setState({showCard:!1,cardType:"",cardWebviewID:""}),n.ableURLBar()},componentDidMount:function(){c.on("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview),c.on("CRAD_SDK_RES",this._cardSdk)},componentWillUnmount:function(){c.removeListener("SHOW_SHARE_WEBVIEW_"+this.state.webviewID,this._showShareWebview),c.removeListener("CRAD_SDK_RES",this._cardSdk)},render:function(){var t=this.props,c=t.webviewID,n=t.project,u=t.offset,v=t.isTabWebview,b=t.href,p=t.pageJSON,S=t.appJSON,f=t.isMap,m=t.chooseLocation,g=t.closeLocation,D=t.hideBack,I=(t.goBack,t.getSimulatorActions),A=t.postAppRoute,_=p.backgroundColor||S.window.backgroundColor||d,k={width:u.width,backgroundColor:_},E={width:u.width,height:u.height},j=this.props.project?null:e.createElement(h,{showCard:this.state.showCard,cardInfo:this.state.cardInfo,closeCard:this.closeCard}),C=this.state.showCard?l.webviewDisplayNone:{};return e.createElement("div",{ref:"container",className:"simulator",style:k},e.createElement("div",{style:C},e.createElement(o,{offset:u,hideBack:D,webviewID:c,project:n,isMap:f,chooseLocation:m,closeLocation:g,pageJSON:p,appJSON:S,goBack:this.goBack,showFooter:this.showFooter}),e.createElement("div",{className:"simulator-bd",style:E},e.createElement(r,{webviewID:c}),e.createElement(a,{webviewID:c,getSimulatorActions:I,show:this.state.showShare,showShare:this.showShare,showFooter:this.showFooter,shareOpt:this.state.shareOpt}),e.createElement(s,{isMap:f,chooseLocation:m,closeLocation:g,offset:u,href:b,webviewID:c,project:n,getSimulatorActions:I,postAppRoute:A,isTabWebview:v,goBack:this.goBack}),e.createElement(i,{offset:u,webviewID:c,getSimulatorActions:I,show:this.state.showFooter,showFooter:this.showFooter}),e.createElement(w,{webviewID:c,getSimulatorActions:I,show:this.state.showAuthorizeDialog,showAuthorizeDialog:this.showAuthorizeDialog}))),j)}});_exports=u}var _exports;init(),module.exports=_exports;